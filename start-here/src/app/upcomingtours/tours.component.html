<div class="position-relative">
  <img
    src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=300&fit=crop"
    class="img-fluid w-100"
    style="height:300px; object-fit:cover;"
    alt="Treks Banner"
  />
  <div class="position-absolute top-50 start-50 translate-middle text-white text-center">
    <h1 class="fw-bold">Upcoming Treks & Adventures</h1>
  </div>
</div>
<div class="container my-3 d-flex align-items-center gap-2">
  <a routerLink="/home" class="badge bg-light text-dark text-decoration-none">
    üè† Home
  </a>
  <span>‚Ä∫</span>
  <span class="badge bg-success">Upcoming Treks & Adventures</span>
</div>

<div class="container my-3">
  <div class="row align-items-center">
    <div class="col-md-6 mb-2 mb-md-0">
      Showing <strong>{{ trekCount }}</strong> of
      <strong>{{ allTreks.length }}</strong> trips
    </div>

    <div class="col-md-6 text-md-end">
      <select
        class="form-select w-auto d-inline"
        [(ngModel)]="sortBy"
        (change)="sortTreks()"
      >
        <option *ngFor="let option of sortOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
    </div>
  </div>
</div>
<div class="container d-flex justify-content-center align-items-center gap-3 my-4">
  <button
    class="btn btn-outline-secondary"
    (click)="changeYear('prev')"
    [disabled]="selectedYear === years[0]"
  >
    ‚Üê {{ selectedYear - 1 }}
  </button>

  <span class="badge bg-success fs-6 px-4">{{ selectedYear }}</span>

  <button
    class="btn btn-outline-secondary"
    (click)="changeYear('next')"
    [disabled]="selectedYear === years[years.length - 1]"
  >
    {{ selectedYear + 1 }} ‚Üí
  </button>
</div>
<div class="container mb-4">
  <div class="d-flex overflow-auto gap-2">
    <button
      *ngFor="let month of months"
      class="btn"
      [class.btn-success]="selectedMonth === month"
      [class.btn-outline-success]="selectedMonth !== month"
      (click)="selectedMonth = month"
    >
      {{ month }}
      <span
        *ngIf="monthTreks[month]?.length"
        class="badge bg-light text-dark ms-1"
      >
        {{ monthTreks[month].length }}
      </span>
    </button>
  </div>
</div>
<div class="container mb-3">
  <h2>{{ selectedMonth }}</h2>
  <p class="text-muted">{{ trekCount }} departures</p>
</div>
<div class="container d-none d-md-block fw-semibold text-uppercase text-muted border-bottom pb-2">
  <div class="row">
    <div class="col-3">Date & Duration</div>
    <div class="col-5">Trip & Location</div>
    <div class="col-2">Availability</div>
    <div class="col-2">Price</div>
  </div>
</div>
<div class="container">
  <div
    class="card mb-3 shadow-sm"
    *ngFor="let trek of currentMonthTreks"
    [class.opacity-50]="trek.status === 'sold-out'"
    (click)="viewDetails(trek.id)"
    style="cursor:pointer"
  >
    <div class="card-body">
      <div class="row align-items-center">

        <!-- Date -->
        <div class="col-md-3 mb-3 mb-md-0">
          <div class="fw-bold">{{ trek.date }}, {{ trek.time }}</div>
          <small class="text-muted">‚è± {{ trek.duration }}</small>
        </div>

        <!-- Trek Info -->
        <div class="col-md-5 mb-3 mb-md-0 d-flex gap-3">
          <img
            [src]="trek.image"
            class="rounded"
            style="width:90px; height:70px; object-fit:cover"
          />
          <div>
            <h5 class="mb-1">{{ trek.name }}</h5>
            <small class="text-muted">üìç {{ trek.location }}</small><br />
            <span class="badge bg-light text-dark mt-1">
              {{ trek.category }}
            </span>
          </div>
        </div>

        <!-- Status -->
        <div class="col-md-2 mb-3 mb-md-0">
          <span
            class="badge"
            [class.bg-success]="trek.status === 'available'"
            [class.bg-secondary]="trek.status === 'sold-out'"
          >
            {{ getStatusText(trek.status) }}
          </span>
        </div>

        <!-- Price -->
        <div class="col-md-2 text-md-end">
          <div class="fw-bold">‚Çπ {{ trek.price }}</div>
          <small class="text-muted">Per Person</small>
          <button
            class="btn btn-sm w-100 mt-2"
            [class.btn-success]="trek.status !== 'sold-out'"
            [class.btn-secondary]="trek.status === 'sold-out'"
            [disabled]="trek.status === 'sold-out'"
          >
            {{ trek.status === 'sold-out' ? 'SOLD OUT' : 'VIEW DETAILS' }}
          </button>
        </div>

      </div>
    </div>
  </div>
</div>
<div *ngIf="trekCount === 0" class="text-center my-5">
  <h3>No treks scheduled for {{ selectedMonth }}</h3>
  <p class="text-muted">Check other months or years</p>
</div>
<div class="container my-5">
  <div class="card text-center shadow">
    <div class="card-body">
      <h2>Can't find what you're looking for?</h2>
      <p class="text-muted">
        We also organize customized trips and corporate outings
      </p>
      <a routerLink="/contact" class="btn btn-primary w-100">
        Contact Us for Custom Trips
      </a>
    </div>
  </div>
</div>
